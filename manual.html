<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="./images/sys/manual_favicon.png" type="images/png">
    <title>HE manual</title>
</head>

<body>
    <button style="position:fixed;bottom:10px;right:10px;z-index:999;font-size: 16px;color: #2545A5;"
        onclick="window.scrollTo(0,0)">トップへ戻る</button>
    <h1>Hakoniwa Editor のマニュアル</h1>
    <a href="./index.html">＞＞ Hakoniwa Editorへ ＜＜</a>
    <h2>目次</h2>
    <a href="#Overview">・概要</a>
    <br>
    <a href="#Environment">・推奨環境</a>
    <br>
    <a href="#How_to">・操作方法</a>
    <br>
    <a href="#Url_Parameter">・URLのパラメータについて</a>
    <br>
    <a href="#Bug_Workaround">・バグ発生時の対処方法</a>
    <br>
    <a href="#Value">・値について</a>
    <br>
    <a href="#Terrains">・現在の使用可能地形一覧</a>
    <br>
    <a href="#Change_log">・チェンジログ</a>
    <h2 id="Overview">概要</h2>
    <ul>
        <li>箱庭を自由に作れる、マイクラで言うクリエイティブモードのような物。</li>
        <li>サーバーが無い為、セーブはパスワード制。</li>
        <li>地形は随時追加。</li>
        <li>開発中のため、致命的な問題を孕んでいる可能性あり。</li>
    </ul>
    <h2 id="Environment">推奨環境</h2>
    ・機種
    <br>　PC、スマホ。
    <br>
    <br>・javascript
    <br>　ES6.0以降。
    <br>
    <br>・ブラウザ
    <br>　chrome, iron 等の chromium を推奨。
    <br>　その他のブラウザは未検証の為、非推奨。
    <br>　最近のバージョンの使用を推奨。
    <br>　javascriptを有効にすること。

    <h2 id="How_to">操作方法/各ボタンの詳細</h2>
    ・地形を描く方法
    <br>地形、値、ペンの太さを設定してマップを左クリックまたはタップ。
    <br>ドラッグすると一気に描ける。
    <br>
    <br>・座標マスを無効/有効にする
    <br>有効にすると座標番号付きスペースが表示される。
    <br>画像変換の際は一緒に変換される。
    <br>デフォルトでon。
    <br>
    <br>・ヘッダーの有効/無効にする。
    <br>有効にするとヘッダーが表示される。
    <br>デフォルトでon。
    <br>
    <br>・グリッドをon/offにする
    <br>グリッドをonにすると、マスが目立つようになる。
    <br>画像変換の際はグリッドも一緒に変換される。
    <br>
    <br>・マスをsquare/hexにする
    <br>squareにするとマスが綺麗に並ぶ。
    <br>hexにするとマスが箱庭と同じ並びになる。
    <br>
    <br>・前/次の操作へ
    <br>操作のやり直しが行える。
    <br>地形を描くと"次の操作へ"がリセットされる。
    <br>ドラッグ等はドラッグを終えるまでが１操作として扱われる。
    <br>
    <br>・スポイト
    <br>ボタンを押した後、マップの地形をクリックすることで、その地形を使えるようになる。
    <br>キャンセルしたい場合は、もう一度ボタンを押す。
    <br>
    <br>・置換する
    <br>クリックした地形と同じ地形を全て現在セレクト中の地形に置き換える。
    <br>キャンセルしたい場合は、もう一度ボタンを押す。
    <br>
    <br>・マスを選択
    <br>マスを選択できるようになり、コピー、移動機能で扱える。
    <br>間違えて選択してしまったら、もう一度選択することで解除される。
    <br>最初に押したマスが基準点となり、コピー等での移動の際にそことの差分で移動が行われる。
    <br>終わったら、"選択を確定"を押す。
    <br>
    <br>・選択された地形をコピー
    <br>"マスを選択"で選択したマスをコピーできる。
    <br>コピー先の基準点の位置をクリックするとコピーが行われる。
    <br>間違えた場合は、"前の操作へ"で戻せる。
    <br>キャンセルしたい場合は、もう一度ボタンを押す。
    <br>
    <br>・選択された地形を移動
    <br>"マスを選択"で選択したマスを移動できる。
    <br>移動先の基準点の位置をクリックすると移動が行われる。
    <br>移動元は現在選択している地形で置き換わる。
    <br>間違えた場合は、"前の操作へ"で戻せる。
    <br>キャンセルしたい場合は、もう一度ボタンを押す。
    <br>
    <br>・マップを画像に変換
    <br>現在の状態を画像に変換できる。
    <br>ポップアップを許可しないと利用不可。
    <br>(ブラウザの仕様上、DataURLに直接ジャンプ出来ない為。)
    <br>転移先ページでリロードすると画像が消えるので注意。
    <br>
    <br>・パスワードの生成
    <br>現在の状態を文字列として表示する。
    <br>クリップボードにコピーボタンを押すことで自動的にコピーされる。
    <br>
    <br>・パスワードから復元
    <br>文字列からマップデータを復元する。
    <br>空白文字は自動的に詰められる。
    <br>破損していると読み込めない。
    <br>ページがロードされる前に実行すると上手く読み込めない場合がある。
    <br>もし間違えて復元してしまったら"前の操作へ"ボタンで戻せる。
    <br>
    <br>・URL生成
    <br>パスワードを含めたURLを生成する。
    <br>使用しているパラメータは継承される。
    <br>ポップアップを許可しないと利用不可。

    <h2 id="Url_Parameter">URLパラメータについて</h2>
    基本的な文法 : ~/HE/index.html?par1&par2&par3...
    <br>・各パラメータの詳細
    <!--
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
    -->
    <br>
    <table border="1">
        <tr>
            <th>パラメータ</th>
            <th>説明</th>
            <th>文法</th>
        </tr>
        <tr>
            <td>line</td>
            <td>マップの一列、一行の大きさを設定。</td>
            <td>line=20　　(数値のみ)</td>
        </tr>
        <tr>
            <td>size</td>
            <td>一マスの大きさを設定。画像サイズにも対応する。</td>
            <td>size=32　　(数値のみ)</td>
        </tr>
        <tr>
            <td>log</td>
            <td>操作ログの最大記録数を設定。</td>
            <td>log=20　　(数値のみ)</td>
        </tr>
        <tr>
            <td>theme</td>
            <td>メインの背景色と、ツールボックスの背景色を設定。rgbは"#"を"$"に変える。</td>
            <td>theme=MainBGColor,ToolsBGColor,MapColor
                <br>例1　theme=blue,green,red
                <br>例2　theme=$E1D2C3,$2F3E1D,$00424D
                <br>何も指定しないとdefaultの設定を使用する。
                <br>theme=,blue, (ToolsBGColorの設定だけ変更。)
            </td>
        </tr>
        <tr>
            <td>theme</td>
            <td>Mapの後ろに指定した画像を配置。themeのMapColorを上書きする。</td>
            <td>theme=${image_url}</td>
        </tr>
        <tr>
            <td>mode</td>
            <td>順に、grid,hex,座標マス,headerのデフォルト状態を設定。</td>
            <td>mode=0,1,1,1　　(0 or 1 のみ)
                <br>何も指定しないとdefaultの設定を使用する。
                <br>mode=1,,, (gridの設定だけ変更。)
            </td>
        </tr>
        <tr>
            <td>pass</td>
            <td>ページロード時に自動的に復元するパスワードを設定</td>
            <td>pass=mXXXXα ~ 22666&lt;</td>
        </tr>
        <tr>
            <td>add_data</td>
            <td>使用できる地形を追加する。画像urlのエンコードを推奨。</td>
            <td>add_data=使用する画像のurl,地形名,内部ID(被らない一文字。漢字推奨)${a}(複数追加する場合)...
                <br><a href="#Use_Value">値を使用する場合</a>
                <br>例1　add_data=url,exmple1,壱
                <br>例2　add_data=url,exmple1,壱${a}url,exmple2,弐
        </tr>
        <tr>
            <td>add_press</td>
            <td>パスワード短縮に使用するパターンを追加する。</td>
            <td>add_press=短縮する文字列,短縮した文字(被らない一文字。漢字推奨)${a}(複数追加する場合)...
                <br>例1　add_press=壱壱壱壱壱,春
                <br>例2　add_press=壱壱壱壱壱,春${a}弐弐弐弐弐,夏
            </td>
        </tr>
    </table>
    <h4 id="Use_Value">・add_dataで値を使用する方法</h4>
    用意する画像は拡張子の前に@+1~99(1から順に)を入れ、ディレクトリと拡張子を揃える。
    <br>パラメータには画像の@1を'${n}'に変えたURLを一つ記述する。内部IDは追加する数だけ記述する。
    <br>
    <br>用意する画像: ~/exmple@1.jpg,~/exmple@2.jpg,~/exmple@3.jpg
    <br>パラメータ:　add_data=~/exmple${n}.jpg,exmple1,壱,弐,参

    <h2 id="Bug_Workaround">バグ発生時の対処方法</h2>
    重要なデータの場合、パスワードを生成後、コピーやCookieに保存し、リロードする。
    <br>余裕があれば theta まで連絡をする。
    <br>パスワード生成の仕様上、マップ配置が崩壊していても、正常に生成可能。
    <br>パスワード関連のバグが発生した場合、復旧不可能な可能性がある。

    <h2 id="Value">値について</h2>
    地形の規模等の値に比例して大きくなる物の他、種類を設定する物もある。
    <br>以下は種類の表。なお、プレビューで確認可能。
    <br>
    <br> ・大学
    <table border="1">
        <tr>
            <th>番号</th>
            <th>大学の種類</th>
        </tr>
        <tr>
            <td>1</td>
            <td>農業大学</td>
        </tr>
        <tr>
            <td>2</td>
            <td>工業大学</td>
        </tr>
        <tr>
            <td>3</td>
            <td>総合大学</td>
        </tr>
        <tr>
            <td>4</td>
            <td>軍事大学</td>
        </tr>
        <tr>
            <td>5</td>
            <td>気象大学</td>
        </tr>
        <tr>
            <td>6</td>
            <td>生物大学（いのら）</td>
        </tr>
        <tr>
            <td>7</td>
            <td>気象大学（テトラ）</td>
        </tr>
    </table>
    <br>・線路、電車
    <table border="1">
        <tr>
            <th>番号</th>
            <th>線路の形</th>
        </tr>
        <tr>
            <td>1</td>
            <td>横</td>
        </tr>
        <tr>
            <td>2</td>
            <td>╯</td>
        </tr>
        <tr>
            <td>3</td>
            <td>╮</td>
        </tr>
        <tr>
            <td>4</td>
            <td>╰</td>
        </tr>
        <tr>
            <td>5</td>
            <td>╯（小）</td>
        </tr>
        <tr>
            <td>6</td>
            <td>╮（小）</td>
        </tr>
        <tr>
            <td>7</td>
            <td>╰（小）</td>
        </tr>
        <tr>
            <td>8</td>
            <td>╭（小）</td>
        </tr>
        <tr>
            <td>10</td>
            <td>縦（右寄り）</td>
        </tr>
        <tr>
            <td>11</td>
            <td>縦（左寄り）</td>
        </tr>
        <tr>
            <td>12</td>
            <td>-＜</td>
        </tr>
        <tr>
            <td>13</td>
            <td>＞-</td>
        </tr>
    </table>
    <br> ・牧場
    <table border="1">
        <tr>
            <th>番号</th>
            <th>牧場の種類</th>
        </tr>
        <tr>
            <td>1</td>
            <td>牧場</td>
        </tr>
        <tr>
            <td>2</td>
            <td>養鶏場</td>
        </tr>
        <tr>
            <td>3</td>
            <td>養豚場</td>
        </tr>
    </table>
    <br> ・船
    <table border="1">
        <tr>
            <th>番号</th>
            <th>船の種類</th>
        </tr>
        <tr>
            <td>1</td>
            <td>小型漁船</td>
        </tr>
        <tr>
            <td>2</td>
            <td>中型漁船</td>
        </tr>
        <tr>
            <td>3</td>
            <td>大型漁船</td>
        </tr>
        <tr>
            <td>4</td>
            <td>帆船</td>
        </tr>
        <tr>
            <td>5</td>
            <td>海底探査船</td>
        </tr>
        <tr>
            <td>6</td>
            <td>高速漁船</td>
        </tr>
        <tr>
            <td>7</td>
            <td>豪華客船TITANICK</td>
        </tr>
        <tr>
            <td>8</td>
            <td>戦艦RENAS</td>
        </tr>
        <tr>
            <td>9</td>
            <td>戦艦ERADICATE</td>
        </tr>
        <tr>
            <td>10</td>
            <td>漁船MASTER</td>
        </tr>
        <tr>
            <td>11</td>
            <td>戦艦ERADICATE・改</td>
        </tr>
        <tr>
            <td>12</td>
            <td>海賊船</td>
        </tr>
    </table>
    <br> ・怪獣
    <table border="1">
        <tr>
            <th>番号</th>
            <th>怪獣の種類</th>
        </tr>
        <tr>
            <td>1</td>
            <td>メカいのら</td>
        </tr>
        <tr>
            <td>2</td>
            <td>いのら</td>
        </tr>
        <tr>
            <td>3</td>
            <td>サンジラ（柔）</td>
        </tr>
        <tr>
            <td>4</td>
            <td>サンジラ（硬）</td>
        </tr>
        <tr>
            <td>5</td>
            <td>いのらゴースト</td>
        </tr>
        <tr>
            <td>6</td>
            <td>キングいのら</td>
        </tr>
        <tr>
            <td>7</td>
            <td>王蟲</td>
        </tr>
        <tr>
            <td>8</td>
            <td>めたはむ</td>
        </tr>
        <tr>
            <td>9</td>
            <td>バリモア</td>
        </tr>
        <tr>
            <td>10</td>
            <td>奇獣スライム</td>
        </tr>
        <tr>
            <td>11</td>
            <td>はねはむ</td>
        </tr>
        <tr>
            <td>12</td>
            <td>天使ミカエル</td>
        </tr>
        <tr>
            <td>13</td>
            <td>スライムレジェンド（柔）</td>
        </tr>
        <tr>
            <td>14</td>
            <td>スライムレジェンド（硬）</td>
        </tr>
        <tr>
            <td>15</td>
            <td>f02</td>
        </tr>
        <tr>
            <td>16</td>
            <td>天使ウリエル</td>
        </tr>
        <tr>
            <td>17</td>
            <td>魔術師アールヴ</td>
        </tr>
        <tr>
            <td>18</td>
            <td>堕天使イセリア</td>
        </tr>
        <tr>
            <td>19</td>
            <td>魔王サタン</td>
        </tr>
        <tr>
            <td>20</td>
            <td>アイススコーピオン</td>
        </tr>
        <tr>
            <td>21</td>
            <td>マスコットいのら</td>
        </tr>
        <tr>
            <td>22</td>
            <td>テトラ</td>
        </tr>
        <tr>
            <td>23</td>
            <td>超神獣テトラ</td>
        </tr>
        <tr>
            <td>24</td>
            <td>ワープいのら</td>
        </tr>
        <tr>
            <td>25</td>
            <td>｢の轤ｭん</td>
        </tr>
    </table>
    <br> ・怪獣の置物
    <table border="1">
        <tr>
            <th>番号</th>
            <th>怪獣の種類</th>
        </tr>
        <tr>
            <td>1</td>
            <td>いのら</td>
        </tr>
        <tr>
            <td>2</td>
            <td>王蟲</td>
        </tr>
        <tr>
            <td>3</td>
            <td>天使ミカエル</td>
        </tr>
        <tr>
            <td>4</td>
            <td>f02</td>
        </tr>
        <tr>
            <td>5</td>
            <td>ダークいのら</td>
        </tr>
        <tr>
            <td>6</td>
            <td>テトラ</td>
        </tr>
        <tr>
            <td>7</td>
            <td>めたはむ</td>
        </tr>
    </table>
    <br> ・地石、闇石
    <table border="1">
        <tr>
            <th>番号</th>
            <th>地石の色</th>
        </tr>
        <tr>
            <td>1,7</td>
            <td>青</td>
        </tr>
        <tr>
            <td>2,8</td>
            <td>緑</td>
        </tr>
        <tr>
            <td>3,9</td>
            <td>赤紫</td>
        </tr>
        <tr>
            <td>4,10</td>
            <td>銀</td>
        </tr>
        <tr>
            <td>5,11</td>
            <td>オレンジ</td>
        </tr>
        <tr>
            <td>6,12</td>
            <td>黒(闇)</td>
        </tr>
    </table>
    <h2 id="Terrains">現在の使用可能地形一覧</h2>
    <ol id="terrain-list-id"></ol>
    <h2 id="Change_log">チェンジログ</h2>
    <!--テンプレート
    <font size="5">・ver </font>
    <br>地形の変更 : 
    <br>機能の変更 :
    <br>その他の変更 :
    <br>
    <br> 
    -->
    <font size="5">・ver 0.3.3</font>
    <br>地形の変更 : 空白タイルに黒、透明を追加(値:2,3)
    <br>機能の変更 :
    <br>UIの大きな改善。
    <br>?themeにmapの裏の色指定を追加。
    <br>?map_imgを追加。
    <br>
    <br>その他の変更 :
    <br>javascriptの小さな修正。
    <br>LICENSEを追加。
    <br>
    <br>
    <font size="5">・ver 0.3.2</font>
    <br>地形の変更 : 公孫樹/桜を追加。
    <br>機能の変更 :
    <br>?add_dataの不具合を修正
    <br>?mode,themeに未指定オプションを追加。
    <br>
    <br>その他の変更 :
    <br>javascriptの小さな修正。
    <br>UIの小さな修正。
    <br>不要なファイルを削除。
    <br>README.mdを追加。
    <br>
    <br>
    <font size="5">・ver 0.3.1</font>
    <br>地形の変更 : サボテン、薔薇を追加。
    <br>機能の変更 : ?add_dataの仕様を改善。
    <br>
    <br>
    <font size="5">・ver 0.3.0</font>
    <br>地形の変更 : 怪獣の置物(ダークいのら、テトラ、めたはむ)、ピラミッド、バッグを追加。
    <br>機能の変更 :
    <br>置換機能を追加。
    <br>選択範囲を反転する機能を追加。
    <br>ヘッダーの有効/無効化機能を追加。
    <br>URLのパラメータを追加。<a href="#Url_Parameter">詳細</a>
    <br>URL生成機能を追加。
    <br>パスワード短縮に使用するパターンを2種追加。
    <br>地形プレビューの処理を改善。
    <br>パスワードから復元の処理を改善。
    <br>塗りつぶし処理の不具合を修正
    <br>特定の手順で選択せずにコピー/移動が出来るようになる不具合を修正。
    <br>
    <br>その他の変更 :
    <br>タイルの内部IDを改善。
    <br>spの操作性を改善。
    <br>一部の警告を改善。
    <br>UIの小さな修正。
    <br>javascriptの小さな修正。
    <br>
    <br>
    <font size="5">・ver 0.2.5</font>
    <br>機能の変更 :
    <br>選択された地形を塗りつぶす機能を追加。
    <br>全選択/解除機能を追加。
    <br>ドラッグしながらコピーすると一つの操作として扱われるように変更。
    <br>スポイトを選択した状態でもhex切り替えを出来るように変更。
    <br>hex切り替えの処理を改善。
    <br>パスワードから復元の処理を改善。
    <br>
    <br>その他の変更 :
    <br>UIの小さな修正。
    <br>
    <br>
    <font size="5">・ver 0.2.2</font>
    <br>機能の変更 : 座標セレクター、キャンバス設定を削除。
    <br>その他の変更 :
    <br>端末警告を削除。
    <br>spの操作性を大幅に向上。
    <br>
    <br>
    <font size="5">・ver 0.2.1</font>
    <br>地形の変更 : チョコレー都市の追加。
    <br>機能の変更 :
    <br>座標セレクターのサイズを変更。
    <br>実行ボタンのサイズを変更。
    <br>
    <br>その他の変更 :
    <br>リロード時の警告を追加。
    <br>画像変換ページの小さな修正。
    <br>端末警告のテキストを変更。
    <br>
    <br>
    <font size="5">・ver 0.2.0</font>
    <br>地形の変更 : 怪獣(24: ワープいのら, 25: ｢の轤ｭん)、船(12: 海賊船)を追加。
    <br>機能の変更 :
    <br>座標を指定して各機能を実行できる機能を追加。
    <br>キャンバスを無効に出来る機能を追加。
    <br>座標番号付きスペースを切り替える機能を追加。デフォルトでon。
    <br>グリッド使用時のマップの巨大化を軽減。
    <br>グリッド系の処理を若干軽量化。
    <br>タイルクリック時の呼出先を一つに固定することで一部の機能のループ処理の削減。
    <br>nameの使用により、一部の機能のループ処理を若干軽量化。
    <br>
    <br>その他の変更 :
    <br>headerタイルの追加。（起動時間が若干延長）
    <br>選択時のグリッドの色を改善。
    <br>画像変換ページの小さな修正。
    <br>キャンバスの右クリックを禁止するように変更。
    <br>
    <br>
    <font size="5">・ver 0.1.2</font>
    <br>地形の変更 :雪ウサギ(雪だるまの値2)、魔法陣、いのらランドを追加。
    <br>その他の変更 :
    <br>貯金箱のデータを復元するとゴミ箱になるバグを修正。
    <br>UIの一部変更。
    <br>画像変換ページの小さな修正。
    <br>javascriptの小さな修正。
    <br>選択時のグリッドの色を改善。
    <br>クレジットの修正。
    <br>
    <br>
    <font size="5">・ver 0.1.1</font>
    <br>地形の変更 : 豚の貯金箱、ゴミ箱を追加。
    <br>機能の変更 : パスワード周りの仕様を改善。
    <br>その他の変更 :
    <br>クレジットの修正。
    <br>画像変換関係のテキストを変更。
    <br>
    <br>
    <font size="5">・ver 0.1.0</font>
    <br>地形の変更 : 雪だるま、古代遺跡、記念碑、神殿/神社、聖樹、モアイ、熊の人形を追加。
    <br>機能の変更 :
    <br>スポイト機能を追加。
    <br>選択＆コピー＆移動機能を追加。
    <br>前/次の操作機能用のログ数上限を試験的に増加。
    <br>
    <br>その他の変更 :
    <br>グリッドの色を黒に変更。
    <br>UIの小さな変更。
    <br>範囲選択を出来ないように修正。
    <br>PC以外でアクセスした際に警告を表示するように変更。
    <br>
    <br>
    <font size="5">・ver 0.0.2</font>
    <br>地形の変更 :　消防署、電車、レール、駅、大使館、時の神殿、クリスマスツリー、ロケット基地を追加。
    <br>その他の変更 : javascriptの小さな修正。
    <br>
    <br>
    <font size="5">・ver 0.0.1</font>
    <br>公開。
    <br>
    <script src="cfg.js" type="text/javascript"></script>
    <script src="data.js" type="text/javascript"></script>
    <script>
        'use strict';
        for (let Arr of terrain_data) {
            let creli = document.createElement('li');
            creli.innerHTML = '<img src=' + imgp + Arr[0].replace('#N#', '@1') + '.png' + ' alt=E. width=' + imgsize + 'height=' + imgsize + '>' + Arr[1];
            document.getElementById('terrain-list-id').appendChild(creli);
        }
    </script>
</body>

</html>